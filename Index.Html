<!doctype html>
rec.lang = 'en-US';


let finalText = '';


rec.onresult = (e) => {
let interim = '';
for (let i = e.resultIndex; i < e.results.length; ++i) {
const r = e.results[i];
if (r.isFinal) finalText += r[0].transcript + '
';
else interim += r[0].transcript;
}
out.textContent = finalText + interim;
};


rec.onerror = (ev) => {
console.error('Recognition error', ev);
};


rec.onend = () => {
startBtn.disabled = false;
stopBtn.disabled = true;
};


startBtn.onclick = () => {
try { rec.start(); startBtn.disabled = true; stopBtn.disabled = false; out.textContent = '(listening...)'; }
catch(e){ console.warn(e); }
};
stopBtn.onclick = () => { rec.stop(); };
clearBtn.onclick = () => { finalText = ''; out.textContent = '(cleared)'; };
}
</script>
</body>
</html>
